<!doctype html>
<html lang="en">
<head>
	<title>Main page</title>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<!-- <link rel="stylesheet" href="/static/css/main.css"> -->
	<link href='https://fonts.googleapis.com/css?family=Acme' rel='stylesheet'>
	<link href='https://fonts.googleapis.com/css?family=Allerta Stencil' rel='stylesheet'>
	<link href='https://fonts.googleapis.com/css?family=Andada' rel='stylesheet'>
	<link href='https://fonts.googleapis.com/css?family=Kalam' rel='stylesheet'>


	<link rel="stylesheet" type="text/css" href="{{url_for('static', filename='css/main.css') }}">
    <script type="text/javascript" src="/static/neovis.js"></script>

    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>

    <script type="text/javascript">
		// define config car
		// instantiate nodevis object
		// draw

		var viz;

		function draw() {
			var config = {
				container_id: "viz",
				// server_url: "bolt://34.207.188.109:33393",
				server_url: "bolt://localhost:7687",
                server_user: "neo4j",
                // server_password: "stability-generators-multitask",
				server_password: "grand-buzzer-cake-pony-almanac-414",
				labels: {
					"Subject": {
						"caption": "name",
						"font":{
							"size":15,
							"color":"red", 	
						},
						"title_properties": [
                            "name"
                        ]
					},
					"Object": {	
						"caption": "name",
						"font":{
							"size":15,
							"color":"green"	
						},
						"title_properties": [
                            "name"
                        ]
					}
				},
				relationships: {
					"have_a_special_dish": {
						"caption": true,
						"font":{
							"size":15	,
							"color":"#33DCFF"	
						}
					}
				},
				initial_cypher: 'match (n)-[r:la]->(m) return * limit 10',

				arrows: true,
                hierarchical_layout:true,
                hierarchical_sort_method:"directed",				
			};

			viz = new NeoVis.default(config);
			viz.render();
			console.log(viz);
		}
    </script>
</head>

<body onload="draw()">
	<article class='main-title'>
		<h1>Applying <span style="color: blue">BERT</span> and<span style="color: blue"> Knowledge Graph</span> 
			for <span style="color: blue">Vietnamese triple classification</span></h1>
	</article>

	<!-- INPUT AREA -->
	<fieldset>
		<legend>INPUT</legend>
		<div class="sub-block">
			<form action="{{ url_for('predict')}}" method="post" >
				<p> 
					Pick a <b>head</b>: 
					<select id="subject" name="subject" style="font-size: 18px;"> 
						<option value="buon_ma_thuot">buon_ma_thuot</option> 
						<option value="bac_kan">bac_kan</option> 
						<option value="ha_noi">ha_noi</option>
						<!-- <input type="text" name="experience" placeholder="Experience" required="required" /> -->
	
					</select> 
				</p> 
				<p> 
					Pick a <b>relation</b>: 
					<select id="rela" name="relation" style="font-size: 18px;"> 
						<option value="duoc_xem_la">duoc_xem_la</option> 
					</select> 
				</p>
				<p> 
					Pick a <b>tail</b>: 
					<select id="object" name="object" style="font-size: 18px;"> 
						<!-- TODO correct this once training has happened with some 2020 values -->
						<option value="thanh_pho_lon_nhat_vung_tay_nguyen">thanh_pho_lon_nhat_vung_tay_nguyen</option>  
						<option value="tinh_giau_tiem_nang_du_lich">tinh_giau_tiem_nang_du_lich</option>  
	
					</select> 
				</p>
				
				<!-- <button><a onclick="link_with_args();" class="button-classify">Classify</a></button> -->
				<button type="submit" class="classify-button">Classify</button>
			</form>
		</div>
		<div class="sub-block">
			<div style="border: 3px dashed #b1bbc9; height: 400px; width: 600px; text-align: right;" class="style-viz" id="viz" >
			</div>
		</div>
		<!-- <textarea rows="4" cols=50 id="cypher"></textarea><br> -->

	</fieldset>
	<!-- OUTPUT AREA -->
		
	<fieldset>
		<legend>OUTPUT</legend>
		<div>
			<fieldset>
				<legend>Model outcome</legend>
				<div>
					<h3 style="color: blue"> 
						Triple classification result
					</h3> 
					<h2 style="color: green;"> >{{ prediction_text }}
					</h2>
				</div>
			</fieldset>	
		</div>
		<div>
			<fieldset style="margin-top: 20px;">
				<legend>Verification</legend>
				<a style="width: 50px; float: left;	margin-right: 50px;" href="{{url_for('download_org')}}" download>Original text</a>
				<a style="width: 50px; float: left;	margin-right: 50px;" href="{{url_for('download_rd1')}}" download>Random text 1</a>
				<a style="width: 50px; float: left;	margin-right: 50px;" href="{{url_for('download_rd2')}}" download>Random text 2</a>
				</fieldset>
		</div>
		
	</fieldset>
</body>

<script>
	$("#reload").click(function() {

		var cypher = $("#cypher").val();

		if (cypher.length > 3) {
			viz.renderWithCypher(cypher);
		} else {
			console.log("reload");
			viz.reload();

		}

	});

	$("#stabilize").click(function() {
		viz.stabilize();
	})

</script>
</html>